
# 파이썬 리스트 컴프리헨션 (List Comprehension)

리스트 컴프리헨션은 파이썬에서 리스트를 간결하게 생성할 수 있는 강력한 기능입니다. 일반적인 반복문보다 더 간결하게 리스트를 생성할 수 있으며, 읽기 쉽고 유지 관리가 용이한 코드 작성을 가능하게 합니다.

## 1. 리스트 컴프리헨션 기본 구조

리스트 컴프리헨션의 기본 구조는 다음과 같습니다:

```python
[표현식 for 항목 in 반복 가능한 객체 if 조건]
```

- `표현식`: 리스트의 각 요소에 적용할 표현식입니다.
- `항목`: 반복 가능한 객체(예: 리스트, 문자열, 범위 등)에서 가져온 요소를 나타냅니다.
- `반복 가능한 객체`: 리스트를 생성할 때 반복할 객체입니다.
- `if 조건` (선택적): 조건이 참인 경우에만 요소를 리스트에 추가합니다.

### 예제 1: 0부터 4까지의 제곱수를 가진 리스트 생성

```python
# 0부터 4까지의 숫자를 생성하여 각 숫자의 제곱을 계산한 리스트를 생성합니다.
squares = [x ** 2 for x in range(5)]
# range(5)는 0, 1, 2, 3, 4를 생성합니다.
# x ** 2는 각 x의 제곱을 계산합니다.
# 최종적으로 [0, 1, 4, 9, 16]이 됩니다.
print(squares)  # 출력: [0, 1, 4, 9, 16]
```

### 예제 2: 짝수만 필터링한 리스트 생성

```python
# 0부터 9까지의 숫자 중에서 짝수만 선택하여 리스트를 생성합니다.
evens = [x for x in range(10) if x % 2 == 0]
# range(10)은 0부터 9까지의 숫자를 생성합니다.
# if x % 2 == 0 조건은 짝수인 경우에만 리스트에 추가합니다.
# 최종적으로 [0, 2, 4, 6, 8]이 됩니다.
print(evens)  # 출력: [0, 2, 4, 6, 8]
```

### 예제 3: 문자열 리스트에서 특정 조건을 만족하는 요소 선택

```python
# 'a' 문자가 포함된 과일 이름들만 선택하여 리스트를 생성합니다.
fruits = ['apple', 'banana', 'cherry', 'date']
selected_fruits = [fruit for fruit in fruits if 'a' in fruit]
# fruits 리스트를 순회하면서 'a'가 포함된 fruit만 리스트에 추가합니다.
# 최종적으로 ['apple', 'banana', 'date']가 됩니다.
print(selected_fruits)  # 출력: ['apple', 'banana', 'date']
```

### 예제 4: 중첩 반복문을 이용한 리스트 컴프리헨션

```python
# 3x3 행렬의 모든 좌표 쌍을 생성합니다.
pairs = [(x, y) for x in range(3) for y in range(3)]
# 첫 번째 for문은 x에 대해 0, 1, 2를 순회합니다.
# 두 번째 for문은 y에 대해 0, 1, 2를 순회합니다.
# 각 (x, y) 쌍이 리스트에 추가됩니다.
# 최종적으로 [(0, 0), (0, 1), (0, 2), (1, 0), (1, 1), (1, 2), (2, 0), (2, 1), (2, 2)]가 됩니다.
print(pairs)  # 출력: [(0, 0), (0, 1), (0, 2), (1, 0), (1, 1), (1, 2), (2, 0), (2, 1), (2, 2)]
```

### 예제 5: 중첩된 리스트 컴프리헨션

```python
# 중첩 리스트를 평탄화하여 하나의 리스트로 만듭니다.
matrix = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
flat_list = [num for row in matrix for num in row]
# 첫 번째 for문은 각 행(row)에 대해 순회합니다.
# 두 번째 for문은 각 행의 요소(num)에 대해 순회하여 num을 리스트에 추가합니다.
# 최종적으로 [1, 2, 3, 4, 5, 6, 7, 8, 9]가 됩니다.
print(flat_list)  # 출력: [1, 2, 3, 4, 5, 6, 7, 8, 9]
```

### 예제 6: 람다 함수와 함께 사용하는 리스트 컴프리헨션

```python
# 리스트의 각 요소에 람다 함수를 적용하여 새로운 리스트를 생성합니다.
numbers = [1, 2, 3, 4, 5]
squared_numbers = [(lambda x: x ** 2)(x) for x in numbers]
# numbers 리스트의 각 요소 x에 대해 람다 함수 (lambda x: x ** 2)를 적용하여 제곱값을 계산합니다.
# 최종적으로 [1, 4, 9, 16, 25]가 됩니다.
print(squared_numbers)  # 출력: [1, 4, 9, 16, 25]
```

## 2. 리스트 컴프리헨션의 장점

- **간결함**: 코드가 짧고 명확해집니다.
- **성능**: 일반적인 for 루프보다 더 빠르게 동작할 수 있습니다.
- **가독성**: 조건부 논리와 반복문을 한 줄에 표현할 수 있어 코드의 가독성이 높아집니다.
